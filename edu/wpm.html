<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Typing Speed Test</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap');

  :root {
    --primary-color: #ec4899; /* Pink */
    --secondary-color: #3b82f6; /* Blue */
    --bg-color: #111111;
    --text-color: #f3f3f3;
    --input-bg: #1f1f1f;
    --input-border: #333;
  }

  body {
    font-family: 'Inter', sans-serif;
    background-color: var(--bg-color);
    color: var(--text-color);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    min-height: 100vh;
    margin: 0;
    transition: background-color 0.3s, color 0.3s;
  }

  body.light {
    --bg-color: #ffffff;
    --text-color: #111111;
    --input-bg: #f3f4f6;
    --input-border: #ccc;
  }

  h1 {
    font-weight: 600;
    margin-bottom: 20px;
    color: var(--primary-color);
  }

  .stats {
    display: flex;
    gap: 20px;
    margin-bottom: 20px;
    font-weight: 600;
  }

  .typing-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 15px;
  }

  .word-pool {
    display: flex;
    flex-wrap: wrap;
    max-width: 500px;
    gap: 8px;
    margin-bottom: 10px;
    font-size: 16px;
    color: #888;
  }

  .word-pool span.active {
    color: var(--primary-color);
    font-weight: 600;
  }

  input {
    font-size: 18px;
    padding: 12px 15px;
    width: 350px;
    border: 2px solid var(--input-border);
    border-radius: 8px;
    outline: none;
    background: var(--input-bg);
    color: var(--text-color);
    transition: border-color 0.2s, box-shadow 0.2s, background 0.3s, color 0.3s;
    pointer-events: auto;
  }

  input.correct {
    border-color: var(--secondary-color);
  }

  input.incorrect {
    border-color: #f87171;
  }

  /* Toggle Styles */
  .toggle-container {
    position: absolute;
    top: 20px;
    right: 20px;
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 14px;
    cursor: pointer;
    user-select: none;
  }

  .toggle-switch {
    position: relative;
    width: 50px;
    height: 24px;
    background: var(--input-border);
    border-radius: 12px;
    transition: background 0.3s;
  }

  .toggle-switch::after {
    content: '';
    position: absolute;
    width: 22px;
    height: 22px;
    background: var(--bg-color);
    border-radius: 50%;
    top: 1px;
    left: 1px;
    transition: left 0.3s, background 0.3s;
  }

  body.light .toggle-switch::after {
    left: 27px;
  }

</style>
</head>
<body>

<div class="toggle-container">
  Light Mode
  <div class="toggle-switch" id="modeToggle"></div>
</div>

<h1>Typing Speed Test</h1>

<div class="stats">
  <div id="wpm">WPM: 0</div>
  <div id="accuracy">Accuracy: 100%</div>
  <div id="timer">Time: 60s</div>
</div>

<div class="typing-container">
  <div class="word-pool" id="wordPool"></div>
  <input type="text" id="typingInput" placeholder="Start typing..." autofocus>
</div>

<script>
const input = document.getElementById('typingInput');
const wpmDisplay = document.getElementById('wpm');
const accuracyDisplay = document.getElementById('accuracy');
const timerDisplay = document.getElementById('timer');
const wordPoolEl = document.getElementById('wordPool');
const toggle = document.getElementById('modeToggle');

let startTime = null;
let wordCount = 0;
let correctChars = 0;
let totalChars = 0;
let timer = 60;
let timerInterval = null;

// 50 common words
const words = ["the","be","to","of","and","a","in","that","have","I","it","for","not","on","with","he","as","you","do","at","this","but","his","by","from","they","we","say","her","she","or","an","will","my","one","all","would","there","their","what","so","up","out","if","about","who","get","which","go","me"];
let currentWordIndex = 0;

// Populate word pool
function displayWords() {
  wordPoolEl.innerHTML = '';
  words.forEach((w, i) => {
    const span = document.createElement('span');
    span.textContent = w;
    if(i === currentWordIndex) span.classList.add('active');
    wordPoolEl.appendChild(span);
  });
}
displayWords();

// Light/Dark Mode Toggle
toggle.addEventListener('click', () => {
  document.body.classList.toggle('light');
  input.focus(); // keep input focusable after toggle
});

// Start timer
function startTimer() {
  if(timerInterval) return;
  timerInterval = setInterval(() => {
    timer--;
    timerDisplay.textContent = `Time: ${timer}s`;
    if(timer <= 0){
      clearInterval(timerInterval);
      input.disabled = true;
    }
  }, 1000);
}

// Update stats
function updateStats() {
  const elapsedMinutes = (60 - timer)/60 || 1/60;
  const wpm = Math.round(wordCount / elapsedMinutes);
  wpmDisplay.textContent = `WPM: ${wpm}`;

  const accuracy = totalChars ? Math.round((correctChars / totalChars) * 100) : 100;
  accuracyDisplay.textContent = `Accuracy: ${accuracy}%`;
}

// Typing logic
input.addEventListener('keydown', (e) => {
  if(!startTime) {
    startTime = new Date();
    startTimer();
  }

  if(e.key === ' ') {
    e.preventDefault();
    const typed = input.value.trim();
    const currentWord = words[currentWordIndex];
    totalChars += currentWord.length + 1; // include space
    if(typed === currentWord) correctChars += currentWord.length + 1;

    wordCount++;
    currentWordIndex = (currentWordIndex + 1) % words.length;
    displayWords();
    input.value = '';
    input.classList.remove('correct','incorrect');
    updateStats();
  }
});

// Real-time character accuracy feedback
input.addEventListener('input', () => {
  const currentWord = words[currentWordIndex];
  if(currentWord.startsWith(input.value)) {
    input.classList.add('correct');
    input.classList.remove('incorrect');
  } else {
    input.classList.add('incorrect');
    input.classList.remove('correct');
  }
});

</script>

</body>
</html>
