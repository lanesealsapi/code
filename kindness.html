<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Kindness App</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap');

body {
  font-family: 'Inter', sans-serif;
  margin: 0;
  background: #f0f2f5;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: flex-start;
  min-height: 100vh;
  overflow-x: hidden;
  color: #333;
  padding: 30px 10px;
}

h1 {
  font-size: 2rem;
  margin-bottom: 20px;
  text-align: center;
}

.card-stack {
  position: relative;
  width: 90%;
  max-width: 450px;
  height: 280px;
  perspective: 1000px;
  margin-bottom: 20px;
}

.card {
  position: absolute;
  width: 100%;
  height: 100%;
  background: #fff;
  border-radius: 20px;
  box-shadow: 0 10px 25px rgba(0,0,0,0.15);
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  padding: 25px 30px;
  text-align: center;
  transition: transform 0.6s ease, opacity 0.6s ease;
}

.card.hide {
  opacity: 0;
  transform: translateY(-40px) scale(0.95);
}

.card .prompt {
  font-size: 1.2em;
  min-height: 70px;
  margin-bottom: 20px;
  color: #333;
}

.buttons {
  display: flex;
  gap: 12px;
}

button {
  padding: 10px 20px;
  border-radius: 12px;
  border: none;
  font-weight: 600;
  font-size: 0.95em;
  cursor: pointer;
  transition: all 0.25s;
}

.complete {
  background: #4b6cb7;
  color: #fff;
  box-shadow: 0 4px 10px rgba(75,108,183,0.25);
}

.complete:hover {
  transform: scale(1.05);
}

.skip {
  background: #e0e0e0;
  color: #555;
}

.skip:hover {
  transform: scale(1.05);
}

.add-kindness-container {
  width: 90%;
  max-width: 450px;
  display: flex;
  gap: 10px;
  margin-bottom: 15px;
}

.add-kindness-container input {
  flex: 1;
  padding: 12px;
  border-radius: 12px;
  border: 1px solid #ccc;
  outline: none;
  font-size: 1em;
}

.add-kindness-container button {
  padding: 12px 20px;
  border-radius: 12px;
  border: none;
  background: #4b6cb7;
  color: #fff;
  cursor: pointer;
  transition: 0.25s;
}

.add-kindness-container button:hover {
  transform: scale(1.05);
}

.stats {
  font-size: 1.1em;
  margin-bottom: 20px;
}

.streak {
  display: inline-block;
  animation: pulse 0.5s ease;
}

@keyframes pulse {
  0% { transform: scale(1); }
  50% { transform: scale(1.2); }
  100% { transform: scale(1); }
}

.confetti {
  position: fixed;
  width: 8px;
  height: 8px;
  animation: fall 1s linear forwards;
  z-index: 9999;
  border-radius: 50%;
}

@keyframes fall {
  0% { transform: translateY(0) rotate(0deg); opacity: 1; }
  100% { transform: translateY(500px) rotate(360deg); opacity: 0; }
}
</style>
</head>
<body>

<h1>Kindness App</h1>

<div class="card-stack" id="cardStack">
  <!-- Cards generated dynamically -->
</div>

<div class="add-kindness-container">
  <input type="text" id="customKindness" placeholder="Add your own kindness idea...">
  <button id="addBtn">Add</button>
</div>

<div class="stats">
  Streak: <span class="streak" id="streak">0</span> | Total Completed: <span id="total">0</span>
</div>

<script>
const basePrompts = [
  "Send a nice message to someone today.",
  "Compliment a stranger.",
  "Help someone with a small task.",
  "Donate to a local charity.",
  "Leave a positive note for a coworker.",
  "Call a friend you haven't spoken to in a while.",
  "Pick up litter in your area."
];

let data = JSON.parse(localStorage.getItem('kindnessData')) || {
  streak: 0,
  lastDate: null,
  totalCompleted: 0,
  customPrompts: []
};

const cardStack = document.getElementById('cardStack');
const streakEl = document.getElementById('streak');
const totalEl = document.getElementById('total');
const addBtn = document.getElementById('addBtn');
const customInput = document.getElementById('customKindness');

function saveData() { localStorage.setItem('kindnessData', JSON.stringify(data)); }
function getAllPrompts() { return [...basePrompts, ...data.customPrompts]; }

function createConfetti(){
  for(let i=0;i<15;i++){
    const c=document.createElement('div');
    c.className='confetti';
    c.style.left=Math.random()*window.innerWidth+'px';
    c.style.background=`hsl(${Math.random()*360},60%,60%)`;
    c.style.width=`${Math.random()*6+4}px`;
    c.style.height=`${Math.random()*6+4}px`;
    document.body.appendChild(c);
    setTimeout(()=>c.remove(),1000);
  }
}

function updateStats(){
  streakEl.textContent=data.streak;
  totalEl.textContent=data.totalCompleted;
  streakEl.classList.remove('pulse');
  void streakEl.offsetWidth;
  streakEl.classList.add('pulse');
}

function checkDailyReset(){
  const today = new Date().toDateString();
  if(data.lastDate!==today){
    data.streak=0;
    data.lastDate=today;
    saveData();
  }
}

function generateCards(){
  cardStack.innerHTML='';
  const prompts=getAllPrompts().slice(0,5);
  prompts.forEach((p,i)=>{
    const card=document.createElement('div');
    card.className='card';
    card.style.zIndex=5-i;
    card.style.transform=`scale(${1-0.05*i}) translateY(${i*10}px)`;
    card.innerHTML=`
      <div class="prompt">${p}</div>
      <div class="buttons">
        <button class="complete">✅</button>
        <button class="skip">⏭️</button>
      </div>
    `;
    cardStack.appendChild(card);
  });
  addCardListeners();
}

function addCardListeners(){
  const cards=[...cardStack.children];
  cards.forEach((card)=>{
    const complete=card.querySelector('.complete');
    const skip=card.querySelector('.skip');
    complete.onclick=()=>swipeCard(card,'complete');
    skip.onclick=()=>swipeCard(card,'skip');
  });
}

function swipeCard(card,type){
  card.style.transition='transform 0.5s ease, opacity 0.5s ease';
  card.style.transform=`translateX(${type==='complete'?500:-500}px) rotate(${type==='complete'?25:-25}deg)`;
  card.style.opacity=0;
  setTimeout(()=>{
    card.remove();
    if(type==='complete'){
      data.streak+=1;
      data.totalCompleted+=1;
      data.lastDate=new Date().toDateString();
      createConfetti();
      updateStats();
      saveData();
    }
    if(cardStack.children.length===0) generateCards();
  },500);
}

addBtn.addEventListener('click',()=>{
  const value=customInput.value.trim();
  if(value){
    data.customPrompts.push(value);
    customInput.value='';
    saveData();
    generateCards();
    createConfetti();
  }
});

checkDailyReset();
updateStats();
generateCards();
</script>

</body>
</html>
