<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Friendly Emoji Simulator</title>
<style>
  body, html {
    margin:0; padding:0;
    overflow:hidden;
    font-family:'Comic Sans MS', sans-serif;
    background:#e0f7fa;
  }
  canvas { display:block; }
</style>
</head>
<body>
<canvas id="canvas"></canvas>
<script>
const canvas=document.getElementById('canvas');
const ctx=canvas.getContext('2d');
canvas.width=window.innerWidth;
canvas.height=window.innerHeight;

// Emoji characters & themes
const emojiTypes=['😄','😎','🤪','🥳','🐱','🍕','🎈','🎵'];
const names=['Sunny','Coolio','Zany','Party','Whiskers','Slice','Balloony','Tune'];

// Word pools by theme
const wordPools={
  "😄":["smiles","friends","happiness","good vibes","sunshine"],
  "😎":["chill","cool things","shades","style","relaxing"],
  "🤪":["silly","crazy fun","wacky stuff","nonsense","goofing"],
  "🥳":["party","celebration","cake","confetti","fun times"],
  "🐱":["cats","purring","meows","furry pals","whiskers"],
  "🍕":["pizza","cheese","toppings","delicious bites","pepperoni"],
  "🎈":["balloons","floating","fun colors","celebrations","air time"],
  "🎵":["music","beats","songs","melodies","dancing"]
};

// Sentence templates
const templates=[
  "I love {word}!",
  "Do you like {word}?",
  "Wow, what a {word}!",
  "Nothing beats {word}.",
  "Life is better with {word}.",
  "I'm thinking about {word}.",
  "Let's talk about {word}.",
  "Who else enjoys {word}?"
];

class Emoji {
  constructor(index){
    this.x=Math.random()*canvas.width;
    this.y=Math.random()*canvas.height;
    this.vx=(Math.random()-0.5)*3;
    this.vy=(Math.random()-0.5)*3;
    this.size=48;
    this.type=emojiTypes[index%emojiTypes.length];
    this.name=names[index%names.length];
    this.phrase=this.makeSentence();
    this.speechTime=Math.random()*200+100;
    this.conversation=null;
    this.memory=[]; 
  }

  // Compose a safe English sentence
  makeSentence(){
    const pool=wordPools[this.type] || ["fun"];
    const word=pool[Math.floor(Math.random()*pool.length)];
    const template=templates[Math.floor(Math.random()*templates.length)];
    const sentence=template.replace("{word}",word);
    this.memory.push(sentence);
    return sentence;
  }

  move(){
    this.x+=this.vx; this.y+=this.vy;
    if(this.x<0||this.x>canvas.width-this.size) this.vx*=-1;
    if(this.y<0||this.y>canvas.height-this.size) this.vy*=-1;

    if(!this.conversation){
      this.speechTime--;
      if(this.speechTime<=0){
        this.phrase=this.makeSentence();
        this.speechTime=Math.random()*200+100;
      }
    } else {
      if(this.conversation.timer--<=0){
        this.phrase=this.makeSentence();
        this.conversation=null;
        this.speechTime=Math.random()*200+100;
      }
    }
  }

  interact(other){
    const dist=Math.sqrt((other.x-this.x)**2+(other.y-this.y)**2);
    if(dist<100 && !this.conversation && !other.conversation){
      this.conversation={partner:other,timer:150};
      other.conversation={partner:this,timer:150};

      // Simple funny responses
      if(this.type==='🍕' && other.type==='🐱'){
        this.phrase="Do cats eat pizza?";
        other.phrase="Only if it has fish!";
      } else if(this.type==='🥳' || other.type==='🎈'){
        this.phrase="Party time!";
        other.phrase="Let's celebrate!";
      } else if(this.type==='🎵' && other.type==='😎'){
        this.phrase="Cool beats, bro!";
        other.phrase="Turn up the music!";
      }

      // bounce away
      this.vx*=-1; this.vy*=-1;
      other.vx*=-1; other.vy*=-1;
    }
  }

  draw(){
    ctx.font=this.size+"px serif";
    ctx.fillText(this.type,this.x,this.y);

    // speech bubble
    const padding=6;
    ctx.font="16px Comic Sans MS";
    const textWidth=ctx.measureText(this.phrase).width;
    const bubbleX=this.x-textWidth/2+this.size/2;
    const bubbleY=this.y-this.size-30;
    const bubbleWidth=textWidth+padding*2;
    const bubbleHeight=24;

    ctx.fillStyle="rgba(255,255,255,0.9)";
    ctx.strokeStyle="#333";
    ctx.lineWidth=2;
    ctx.beginPath();
    ctx.roundRect(bubbleX,bubbleY,bubbleWidth,bubbleHeight,8);
    ctx.fill();
    ctx.stroke();

    ctx.fillStyle="#000";
    ctx.fillText(this.phrase,bubbleX+padding,bubbleY+18);
  }
}

CanvasRenderingContext2D.prototype.roundRect=function(x,y,w,h,r){
  if(w<2*r) r=w/2;
  if(h<2*r) r=h/2;
  this.beginPath();
  this.moveTo(x+r,y);
  this.arcTo(x+w,y,x+w,y+h,r);
  this.arcTo(x+w,y+h,x,y+h,r);
  this.arcTo(x,y+h,x,y,r);
  this.arcTo(x,y,x+w,y,r);
  this.closePath();
  return this;
}

let emojis=[];
for(let i=0;i<12;i++) emojis.push(new Emoji(i));

function animate(){
  ctx.clearRect(0,0,canvas.width,canvas.height);

  for(let i=0;i<emojis.length;i++){
    for(let j=i+1;j<emojis.length;j++){
      emojis[i].interact(emojis[j]);
    }
  }

  emojis.forEach(e=>{e.move(); e.draw();});
  requestAnimationFrame(animate);
}

animate();

window.addEventListener('resize',()=>{
  canvas.width=window.innerWidth;
  canvas.height=window.innerHeight;
});
</script>
</body>
</html>
