<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Emoji GIF Generator</title>
<style>
  body {
    font-family: sans-serif;
    display: flex;
    flex-direction: column;
    align-items: center;
    background: #111;
    color: #fff;
    margin: 0;
    padding: 0;
  }
  #emojiWheel {
    display: grid;
    grid-template-columns: repeat(10, 40px);
    gap: 5px;
    margin: 20px;
    max-width: 450px;
  }
  .emoji {
    font-size: 32px;
    cursor: pointer;
    transition: transform 0.2s;
  }
  .emoji:hover {
    transform: scale(1.3);
  }
  #canvasContainer {
    position: relative;
    width: 500px;
    height: 500px;
    background: #222;
    overflow: hidden;
    margin-bottom: 20px;
  }
  canvas {
    width: 100%;
    height: 100%;
  }
  button {
    padding: 10px 20px;
    font-size: 16px;
    cursor: pointer;
    margin-bottom: 20px;
  }
</style>
</head>
<body>

<h1>Emoji GIF Generator</h1>
<div id="emojiWheel"></div>
<div id="canvasContainer">
  <canvas id="emojiCanvas" width="500" height="500"></canvas>
</div>
<button id="exportGif">Export as GIF</button>

<script src="https://cdn.jsdelivr.net/npm/gif.js.optimized/dist/gif.js"></script>
<script>
// 100 emojis
const emojis = [
  "😀","😁","😂","🤣","😃","😄","😅","😆","😉","😊",
  "😋","😎","😍","😘","🥰","😗","😙","😚","🙂","🤗",
  "🤩","🤔","🤨","😐","😑","😶","🙄","😏","😣","😥",
  "😮","🤐","😯","😪","😫","🥱","😴","😌","😛","😜",
  "😝","🤤","😒","😓","😔","😕","🙃","🤑","😲","☹️",
  "🙁","😖","😞","😟","😤","😢","😭","😦","😧","🥵",
  "🥶","😨","😩","🤯","😬","😰","😱","🥴","😳","🤪",
  "😵","😡","😠","🤬","😷","🤒","🤕","🤢","🤮","🤧",
  "😇","🤠","🥳","🥸","😎","🤓","🧐","😕","😟","🙁",
  "☹️","😮","😯","😲","😳","🥺","😦","😧","😨","😰"
];

// Fill emoji wheel
const wheel = document.getElementById('emojiWheel');
emojis.forEach(e => {
  const span = document.createElement('span');
  span.textContent = e;
  span.className = 'emoji';
  span.onclick = () => addEmoji(e);
  wheel.appendChild(span);
});

// Canvas setup
const canvas = document.getElementById('emojiCanvas');
const ctx = canvas.getContext('2d');
const width = canvas.width;
const height = canvas.height;

let particles = [];

function addEmoji(char) {
  particles.push({
    char,
    x: Math.random() * width,
    y: Math.random() * height,
    vx: (Math.random()-0.5)*4,
    vy: (Math.random()-0.5)*4,
    size: 32 + Math.random()*32
  });
}

function animate() {
  ctx.clearRect(0, 0, width, height);
  particles.forEach(p => {
    p.x += p.vx;
    p.y += p.vy;
    if(p.x < 0 || p.x > width) p.vx *= -1;
    if(p.y < 0 || p.y > height) p.vy *= -1;
    ctx.font = p.size + "px serif";
    ctx.fillText(p.char, p.x, p.y);
  });
  requestAnimationFrame(animate);
}
animate();

// Export GIF
document.getElementById('exportGif').onclick = () => {
  const gif = new GIF({
    workers: 2,
    quality: 10
  });

  const frames = 30;
  for(let i=0;i<frames;i++){
    gif.addFrame(ctx, {copy: true, delay: 100});
    // move particles a little for next frame
    particles.forEach(p => {
      p.x += p.vx;
      p.y += p.vy;
      if(p.x < 0 || p.x > width) p.vx *= -1;
      if(p.y < 0 || p.y > height) p.vy *= -1;
    });
  }

  gif.on('finished', function(blob) {
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = 'emoji.gif';
    a.click();
  });

  gif.render();
};
</script>

</body>
</html>
