<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Python print → console.log Transpiler</title>
<style>
  body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial; margin: 20px; }
  textarea { width: 100%; height: 200px; font-family: monospace; font-size: 13px; }
  pre { background:#f6f8fa; padding:10px; border-radius:6px; overflow:auto; }
  .row { display:flex; gap:10px; margin-top:10px; }
  .col { flex:1; min-width:0; }
  button { padding:8px 12px; }
  label { display:block; margin-bottom:6px; font-weight:600; }
</style>
</head>
<body>
<h1>Python print → console.log Transpiler</h1>

<label for="input">Python source (paste or load file)</label>
<textarea id="input" placeholder="Paste Python code here..."></textarea>

<div class="row">
  <div class="col">
    <button id="transpile">Transpile</button>
    <button id="download">Download JS</button>
    <input id="filePicker" type="file" accept=".py" style="display:none" />
    <button id="loadFile">Load .py File</button>
  </div>
  <div class="col" style="text-align:right">
    <small>Simple rule: converts print(...) → console.log(...). Single-line calls only.</small>
  </div>
</div>

<hr />

<label for="output">Output JavaScript</label>
<textarea id="output" readonly placeholder="Transpiled JS appears here..."></textarea>

<h3>Preview (run in browser console)</h3>
<pre id="preview">// Transpiled output preview</pre>

<script>
(function(){
  const input = document.getElementById('input');
  const output = document.getElementById('output');
  const preview = document.getElementById('preview');
  const transpileBtn = document.getElementById('transpile');
  const loadFileBtn = document.getElementById('loadFile');
  const filePicker = document.getElementById('filePicker');
  const downloadBtn = document.getElementById('download');

  function transpile(src, filename = 'input.py') {
    // Replace Python print(...) with console.log(...)
    // Handles single-line calls only.
    const out = src.replace(
      /\bprint\s*$\s*([\s\S]*?)\s*$/g,
      (m, args) => {
        if (!args.trim()) return 'console.log()';
        return 'console.log(' + args + ')';
      }
    );

    const header = `// Transpiled by simple print->console.log transpiler\n// Original: ${filename}\n\n`;
    return header + out;
  }

  transpileBtn.addEventListener('click', () => {
    const js = transpile(input.value || '', 'pasted');
    output.value = js;
    preview.textContent = js;
  });

  loadFileBtn.addEventListener('click', () => filePicker.click());
  filePicker.addEventListener('change', () => {
    const f = filePicker.files[0];
    if (!f) return;
    const reader = new FileReader();
    reader.onload = () => {
      input.value = reader.result;
      const js = transpile(reader.result, f.name);
      output.value = js;
      preview.textContent = js;
    };
    reader.readAsText(f);
  });

  downloadBtn.addEventListener('click', () => {
    const js = output.value;
    if (!js) return alert('Nothing to download — transpile first.');
    const blob = new Blob([js], {type: 'application/javascript'});
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = 'transpiled.js';
    document.body.appendChild(a);
    a.click();
    a.remove();
    URL.revokeObjectURL(url);
  });

  // Example starter content
  input.value = `x = 3
print("hello", x)
print()
print('single quoted', 1+2)
def greet(name):
    print("hi", name)
greet("world")
`;
  // Auto-transpile once
  transpileBtn.click();
})();
</script>
</body>
</html>
