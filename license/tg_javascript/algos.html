<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Algorithm Visualizer</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background: linear-gradient(135deg, #1e1f29, #2c2d3f);
    color: #fff;
    margin: 0;
    padding: 20px;
    text-align: center;
  }
  h1 {
    margin-bottom: 10px;
    font-size: 2em;
    color: #ffd369;
  }
  .grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
    gap: 20px;
    margin-top: 20px;
  }
  .card {
    background: #2a2b38;
    border-radius: 12px;
    padding: 15px;
    box-shadow: 0 8px 15px rgba(0,0,0,0.4);
    transition: transform 0.2s ease;
  }
  .card:hover { transform: scale(1.02); }
  .title {
    font-size: 1.2em;
    margin-bottom: 10px;
    color: #00f7ff;
  }
  canvas {
    background: #1b1c25;
    border-radius: 10px;
    width: 100%;
    height: 180px;
    display: block;
    margin: 0 auto 10px;
  }
  button {
    background: #ffd369;
    border: none;
    border-radius: 6px;
    padding: 8px 14px;
    font-weight: bold;
    cursor: pointer;
    transition: background 0.2s ease;
  }
  button:hover { background: #ffac41; }
</style>
</head>
<body>
  <h1>Algorithm Visualizer</h1>
  <p>Click play to watch each algorithm in action!</p>
  <div class="grid">
    <div class="card">
      <div class="title">Bubble Sort</div>
      <canvas id="bubble"></canvas>
      <button onclick="runBubble()">▶ Play</button>
    </div>
    <div class="card">
      <div class="title">Quick Sort</div>
      <canvas id="quick"></canvas>
      <button onclick="runQuick()">▶ Play</button>
    </div>
    <div class="card">
      <div class="title">Dijkstra's Shortest Path</div>
      <canvas id="dijkstra"></canvas>
      <button onclick="runDijkstra()">▶ Play</button>
    </div>
    <div class="card">
      <div class="title">Binary Search</div>
      <canvas id="binary"></canvas>
      <button onclick="runBinary()">▶ Play</button>
    </div>
    <div class="card">
      <div class="title">Tower of Hanoi</div>
      <canvas id="hanoi"></canvas>
      <button onclick="runHanoi()">▶ Play</button>
    </div>
  </div>

<script>
/* ========= Utility ========= */
function clearCanvas(ctx, w, h) {
  ctx.fillStyle = "#1b1c25";
  ctx.fillRect(0,0,w,h);
}

/* ========= Bubble Sort ========= */
function runBubble() {
  let canvas = document.getElementById("bubble");
  let ctx = canvas.getContext("2d");
  canvas.width = canvas.clientWidth;
  canvas.height = canvas.clientHeight;
  let arr = Array.from({length: 15}, () => Math.floor(Math.random()*100)+10);
  let i=0, j=0;
  
  function draw() {
    clearCanvas(ctx, canvas.width, canvas.height);
    arr.forEach((val, idx) => {
      ctx.fillStyle = (idx===j || idx===j+1) ? "#ffd369" : "#00f7ff";
      ctx.fillRect(idx*20+20, canvas.height-val*1.2, 15, val*1.2);
    });
  }
  function step() {
    if (i < arr.length) {
      if (j < arr.length-i-1) {
        if (arr[j] > arr[j+1]) [arr[j], arr[j+1]] = [arr[j+1], arr[j]];
        j++;
      } else { j=0; i++; }
      draw();
      setTimeout(step, 200);
    }
  }
  step();
}

/* ========= Quick Sort ========= */
function runQuick() {
  let canvas = document.getElementById("quick");
  let ctx = canvas.getContext("2d");
  canvas.width = canvas.clientWidth;
  canvas.height = canvas.clientHeight;
  let arr = Array.from({length: 15}, () => Math.floor(Math.random()*100)+10);
  
  function draw(highlight=[]) {
    clearCanvas(ctx, canvas.width, canvas.height);
    arr.forEach((val, idx) => {
      ctx.fillStyle = highlight.includes(idx) ? "#ffd369" : "#00f7ff";
      ctx.fillRect(idx*20+20, canvas.height-val*1.2, 15, val*1.2);
    });
  }
  async function quicksort(l, r) {
    if (l < r) {
      let pivot = arr[r];
      let i = l;
      for (let j=l; j<r; j++) {
        draw([j, r]);
        await new Promise(res=>setTimeout(res,200));
        if (arr[j] < pivot) {
          [arr[i], arr[j]] = [arr[j], arr[i]];
          i++;
        }
      }
      [arr[i], arr[r]] = [arr[r], arr[i]];
      await quicksort(l, i-1);
      await quicksort(i+1, r);
    }
  }
  quicksort(0, arr.length-1);
}

/* ========= Dijkstra ========= */
function runDijkstra() {
  let canvas = document.getElementById("dijkstra");
  let ctx = canvas.getContext("2d");
  canvas.width = canvas.clientWidth;
  canvas.height = canvas.clientHeight;
  
  let nodes = [
    {x:40,y:40}, {x:160,y:40}, {x:80,y:100}, {x:200,y:100}, {x:120,y:160}
  ];
  let edges = [[0,1],[0,2],[1,3],[2,3],[2,4],[3,4]];
  let visited = [];
  let path = [0];
  
  function draw() {
    clearCanvas(ctx, canvas.width, canvas.height);
    ctx.strokeStyle="#888";
    ctx.lineWidth=2;
    edges.forEach(([a,b])=>{
      ctx.beginPath();
      ctx.moveTo(nodes[a].x,nodes[a].y);
      ctx.lineTo(nodes[b].x,nodes[b].y);
      ctx.stroke();
    });
    nodes.forEach((n,i)=>{
      ctx.beginPath();
      ctx.fillStyle= path.includes(i)?"#ffd369": visited.includes(i)?"#00f7ff":"#555";
      ctx.arc(n.x,n.y,15,0,2*Math.PI);
      ctx.fill();
    });
  }
  let i=1;
  function step() {
    if (i<nodes.length) {
      visited.push(path[i-1]);
      path.push(i);
      draw();
      i++;
      setTimeout(step, 800);
    }
  }
  draw(); step();
}

/* ========= Binary Search ========= */
function runBinary() {
  let canvas = document.getElementById("binary");
  let ctx = canvas.getContext("2d");
  canvas.width = canvas.clientWidth;
  canvas.height = canvas.clientHeight;
  let arr = Array.from({length: 15}, (_,i)=>i*5+5);
  let target = arr[Math.floor(Math.random()*arr.length)];
  let l=0, r=arr.length-1;
  
  function draw(mid=-1) {
    clearCanvas(ctx, canvas.width, canvas.height);
    arr.forEach((val, idx) => {
      ctx.fillStyle = (idx===mid) ? "#ffd369" : "#00f7ff";
      ctx.fillText(val, idx*20+20, canvas.height/2);
    });
    ctx.fillStyle="#fff";
    ctx.fillText("Target: "+target, 20, 20);
  }
  function step() {
    if (l<=r) {
      let mid=Math.floor((l+r)/2);
      draw(mid);
      setTimeout(()=>{
        if (arr[mid]===target) return;
        else if (arr[mid]<target) {l=mid+1; step();}
        else {r=mid-1; step();}
      },600);
    }
  }
  step();
}

/* ========= Tower of Hanoi ========= */
function runHanoi() {
  let canvas = document.getElementById("hanoi");
  let ctx = canvas.getContext("2d");
  canvas.width = canvas.clientWidth;
  canvas.height = canvas.clientHeight;
  let pegs=[[3,2,1],[],[]];
  
  function draw() {
    clearCanvas(ctx, canvas.width, canvas.height);
    for (let p=0;p<3;p++){
      ctx.fillStyle="#555";
      ctx.fillRect(80*p+40,80,10,80);
      pegs[p].forEach((disk,idx)=>{
        ctx.fillStyle=["#ffd369","#00f7ff","#ffac41"][disk-1];
        ctx.fillRect(80*p+40-disk*10,150-idx*20, disk*20, 15);
      });
    }
  }
  let moves=[];
  function hanoi(n,from,to,aux){
    if(n>0){hanoi(n-1,from,aux,to);moves.push([from,to]);hanoi(n-1,aux,to,from);}
  }
  hanoi(3,0,2,1);
  
  let i=0;
  function step(){
    if(i<moves.length){
      let [f,t]=moves[i];
      pegs[t].push(pegs[f].pop());
      draw(); i++;
      setTimeout(step,600);
    }
  }
  draw(); step();
}
</script>
</body>
</html>
