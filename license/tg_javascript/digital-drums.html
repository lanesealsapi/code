<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Digital Drum Kit</title>
<style>
  body {
    display: flex;
    flex-direction: column;
    align-items: center;
    background: #1a1a1a;
    color: white;
    font-family: sans-serif;
    height: 100vh;
    justify-content: center;
  }
  h1 {
    margin-bottom: 20px;
  }
  .drum-kit {
    display: grid;
    grid-template-columns: repeat(3, 120px);
    gap: 20px;
  }
  .drum-button {
    width: 120px;
    height: 120px;
    background: #333;
    border-radius: 12px;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 18px;
    cursor: pointer;
    user-select: none;
    transition: transform 0.1s, background 0.1s;
  }
  .drum-button:active {
    transform: scale(0.95);
    background: #555;
  }
  .hint {
    margin-top: 30px;
    font-size: 14px;
    color: #ccc;
  }
</style>
</head>
<body>

<h1>Digital Drum Kit</h1>
<div class="drum-kit">
  <div class="drum-button" data-sound="kick">Kick (Q)</div>
  <div class="drum-button" data-sound="snare">Snare (W)</div>
  <div class="drum-button" data-sound="hihat">Hi-Hat (E)</div>
  <div class="drum-button" data-sound="tom1">Tom 1 (A)</div>
  <div class="drum-button" data-sound="tom2">Tom 2 (S)</div>
  <div class="drum-button" data-sound="tom3">Tom 3 (D)</div>
</div>

<div class="hint">Click the pads or use keys Q, W, E, A, S, D</div>

<script>
const audioCtx = new (window.AudioContext || window.webkitAudioContext)();

function playDrum(type) {
  let osc = audioCtx.createOscillator();
  let gain = audioCtx.createGain();

  osc.connect(gain);
  gain.connect(audioCtx.destination);

  switch(type) {
    case 'kick':
      osc.type = 'square';
      osc.frequency.setValueAtTime(150, audioCtx.currentTime);
      osc.frequency.exponentialRampToValueAtTime(0.001, audioCtx.currentTime + 0.5);
      gain.gain.setValueAtTime(1, audioCtx.currentTime);
      gain.gain.exponentialRampToValueAtTime(0.001, audioCtx.currentTime + 0.5);
      break;

    case 'snare':
      let bufferSize = audioCtx.sampleRate * 0.2;
      let buffer = audioCtx.createBuffer(1, bufferSize, audioCtx.sampleRate);
      let data = buffer.getChannelData(0);
      for (let i = 0; i < bufferSize; i++) {
        data[i] = (Math.random() * 2 - 1) * Math.exp(-5*i/bufferSize);
      }
      let noise = audioCtx.createBufferSource();
      noise.buffer = buffer;
      let noiseGain = audioCtx.createGain();
      noiseGain.gain.setValueAtTime(1, audioCtx.currentTime);
      noise.connect(noiseGain).connect(audioCtx.destination);
      noise.start();
      noise.stop(audioCtx.currentTime + 0.2);
      return;

    case 'hihat':
      let hatBuffer = audioCtx.createBuffer(1, audioCtx.sampleRate * 0.05, audioCtx.sampleRate);
      let hatData = hatBuffer.getChannelData(0);
      for (let i = 0; i < hatBuffer.length; i++) {
        hatData[i] = (Math.random() * 2 - 1) * Math.pow(1 - i/hatBuffer.length, 2);
      }
      let hat = audioCtx.createBufferSource();
      hat.buffer = hatBuffer;
      let hatGain = audioCtx.createGain();
      hatGain.gain.setValueAtTime(0.7, audioCtx.currentTime);
      hat.connect(hatGain).connect(audioCtx.destination);
      hat.start();
      hat.stop(audioCtx.currentTime + 0.05);
      return;

    case 'tom1':
      osc.type = 'sine';
      osc.frequency.setValueAtTime(200, audioCtx.currentTime);
      osc.frequency.exponentialRampToValueAtTime(80, audioCtx.currentTime + 0.3);
      gain.gain.setValueAtTime(0.8, audioCtx.currentTime);
      gain.gain.exponentialRampToValueAtTime(0.001, audioCtx.currentTime + 0.3);
      break;

    case 'tom2':
      osc.type = 'sine';
      osc.frequency.setValueAtTime(250, audioCtx.currentTime);
      osc.frequency.exponentialRampToValueAtTime(100, audioCtx.currentTime + 0.3);
      gain.gain.setValueAtTime(0.8, audioCtx.currentTime);
      gain.gain.exponentialRampToValueAtTime(0.001, audioCtx.currentTime + 0.3);
      break;

    case 'tom3':
      osc.type = 'sine';
      osc.frequency.setValueAtTime(300, audioCtx.currentTime);
      osc.frequency.exponentialRampToValueAtTime(120, audioCtx.currentTime + 0.3);
      gain.gain.setValueAtTime(0.8, audioCtx.currentTime);
      gain.gain.exponentialRampToValueAtTime(0.001, audioCtx.currentTime + 0.3);
      break;
  }

  osc.start();
  osc.stop(audioCtx.currentTime + 0.5);
}

// Button clicks
document.querySelectorAll('.drum-button').forEach(btn => {
  btn.addEventListener('click', () => playDrum(btn.dataset.sound));
});

// Keyboard controls
document.addEventListener('keydown', e => {
  const keyMap = {
    'q': 'kick',
    'w': 'snare',
    'e': 'hihat',
    'a': 'tom1',
    's': 'tom2',
    'd': 'tom3'
  };
  if(keyMap[e.key.toLowerCase()]) playDrum(keyMap[e.key.toLowerCase()]);
});
</script>

</body>
</html>
